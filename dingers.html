<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Daily Dingers</title>
	<script type="text/javascript" src="tabulator.min.js"></script>
	<link href="tabulator.min.css" rel="stylesheet">
	<script type="text/javascript" src="shared.js"></script>
</head>
<style>
	body {
		margin: 0; padding: 0;
		font-size: 18px;
		height: 100vh;
	}
	#table-container {
		padding-top: 1rem;
		display: flex;
		justify-content: center;
		align-items: center;
		height: 90%;
	}
	#table {
		height: 100%;
	}
</style>
<body>
	<nav>
		<a href="/" onclick="event.preventDefault(); route('/');">Home</a>
		<a href="/daily-dingers" onclick="event.preventDefault(); route('/daily-dingers');">Daily Dingers</a>
	</nav>
	<div>
		Dingers
	</div>
	<div id="table-container">
		<div id="table"></div>
	</div>
	<script type="text/javascript">
		const url = "https://api.github.com/repos/zhecht/playerprops/contents/static/dailyev/feed.json";
		fetch(url, {
			headers: {
				"Accept": "application/vnd.github.v3.raw"
			}
		})
			.then(response => response.json())
			.then(res => {
				const data = [];
				for (game of Object.keys(res)) {
					for (row of res[game]) {
						data.push(row);
					}
				}
				renderTable(data)
			})
			.catch(err => console.log(err));

		function renderTable(data) {
			TABLE = new Tabulator("#table", {
				tooltipsHeader: true,
				data: data,
				initialSort: [
					{column: "pa", dir: "desc"},
				],
				columns: [
					//{title: "Confirmed", field: "confirmed", formatter:"tickCross", width: 30, hozAlign: "center"},
					{title: "Player", field: "player", headerFilter: "input", formatter: titleFormatter},
					{title: "PA", field: "pa", hozAlign: "center", sorter: "number"},
					{title: "In", field: "in", hozAlign: "center", sorter: "number"},
					{title: "Result", field: "result", hozAlign: "center"},
					{title: "Exit Velo", field: "evo", hozAlign: "center", sorter: "number"},
					{title: "LA", field: "la", hozAlign: "center", sorter: "number"},
					{title: "Dist", field: "dist", hozAlign: "center", sorter: "number"},
					{title: "HR/Park", field: "hr/park", hozAlign: "center", sorter: "number"},
				],
				rowFormatter: function(row) {
					const data = row.getData();
					if (data.result == "Home Run") {
						const el = row.getElement();
						el.style.backgroundColor = "rgb(100, 149, 237)";
						el.style.color = "white";
					}
				}
			});
		}
	</script>
</body>
</html>
